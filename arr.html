<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0,viewport-fit=cover">
  <meta name="renderer" content="webkit">
  <meta name="keywords" content="">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <title>数组排序等问题</title>
</head>

<body>
  <script>
    // 将数组 ['2018-03-05', '2013-06-12','2019-03-12','2018-03-05','2014-02-22'] 去重且排序
    // Set 具有值唯一性(但不是所有值,等会我抛出我的另外一篇文章)
    // 结合...解构,可以把可迭代(比如 arguments/nodelist 等)的转为数组
    // sort 里面传入 两个值比较,返回-1和1是因为1代表这个数大排后(相对),-1代表小(相对),0为相等
    var arr1 = [...new Set(['2018-03-05', '2013-06-12', '2019-03-12', '2018-03-05', '2014-02-22'])].sort(function (a, b) {
      return a < b ? -1 : 1;
    })
    console.log(arr1);

    // 将数组进行乱序排列
    var arr2 = [1, 2, 3, 4, 5, '6', 7, '8', 'a', 'b', 'z'].sort(function () {
      return Math.random() > 0.5 ? -1 : 1;
    })
    console.log(arr2);

    // 求一个数组中的最大值和最小值之差
    // 当传入是数组且可以隐性转为数字的
    function MaxMinPlus(arr) {
      return Array.isArray(arr) ? Math.max.apply(Math, arr) - Math.min.apply(Math, arr) : console.log('传入的不是数组亦或者未能解决的错误')
    }

    console.log(MaxMinPlus([1, 2, 5, 3]));

    // 给 Array 添加一个方法，去重后返回去重的字符
    var arr4 = [1, 6, 8, 3, 7, 9, 2, 7, 2, 4, 4, 3, 3, 1, 5, 3];
    Array.prototype.extraChar = function () {
      var that = this;
      var cacheExtraChar = [];
      // 从前查找一遍，从后查找一遍，不相等则没有
      // 顺便查一下缓存的数组中有没有，过滤，避免多次写入
      this.map(function (item, index) {
        that.indexOf(item) !== that.lastIndexOf(item) && cacheExtraChar.indexOf(item) === -1 ? cacheExtraChar.push(item) : -1
      })
      return cacheExtraChar;
    }
    console.log(arr4.extraChar().sort(function (a, b) {
      return a - b;
    }));

    // 根据数组中每个对象的属性进行排序
    var arr5 = [{ age: 5, name: '张三' }, { age: 3, name: '李四' }, { age: 15, name: '王五' }, { age: 1, name: '随便' }];
    var arr5Sort = arr5.sort(function (a, b) {
      return a.age - b.age;
    });
    console.log(arr5Sort);

    // 淘宝官网用了多少种标签
    new Set([...document.querySelectorAll('*')].map(v=>v.nodeName)).size;
  </script>
</body>

</html>